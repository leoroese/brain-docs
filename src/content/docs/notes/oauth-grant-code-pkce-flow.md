---
title: oauth-grant-code-pkce-flow
---
Higher security code grant flow typically useful for native apps like mobile and single page applications.

Concerns
- Native: 
	- **Issue**: Inability to securely store client secrets due to the risk of decompiling.
	- **Redirect Vulnerability**: Potential for malicious endpoints through custom URL scheme redirects.
- SPA
	- **Issue**: Client secrets cannot be securely stored as the entire source code is accessible in the browser.

## How PKCE Enhances Security
PKCE flow introduces a 'code verifier', a secret generated by the calling application, which can verified by the auth server. The client then creates a transformed version of the 'code verifier' called 'code challenge' which is sent over HTTPS.

## How it works
1. **Initial Steps**:
    - The client generates a code verifier and a code challenge upon login button click.
2. **Code Challenge Request**:
    - The code challenge is included in the authorization request.
3. **Token Exchange**:
    - After receiving the auth code, the client requests `/oauth/token` and includes the `code_verifier`.
4. **Validation and Continuation**:
    - The server validates the information and proceeds with the authentication.

This is secure because even if an attacker intercepts the auth code, they cannot exchange it without the code verifier.

----
## Attributions
- [Public Spec](https://datatracker.ietf.org/doc/html/rfc7636)
- [Auth0 PKCE Docs](https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce)

----
## Anki
TARGET DECK
authentication

Q: Why does the pkce flow exist? 
A: PKCE flow addresses security concerns in native and SPA apps, where client secrets cannot be securely stored. Native apps risk secret exposure through decompiling, and SPAs have their entire source code available in the browser.
<!--ID: 1700558287071-->


Q: What is different between pkce code flow and regular code flow?
A: PKCE introduces a 'code_verifier' and 'code_challenge' generated by the app, adding an extra validation layer. This ensures that intercepted auth codes are ineffective without the corresponding verifier.
<!--ID: 1700558287072-->
